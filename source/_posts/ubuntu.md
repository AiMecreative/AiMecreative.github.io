---
title: Ubuntu基本命令
date: 2022-01-23
tags: 操作系统
category:
- SEU_Study
---

"终于要开始学习了."

"这不是有手就行?"

<!--more-->

# 操作系统分类
---
### 桌面操作系统
1. windows
2. macOS
3. Linux

### 服务器操作系统
1. Linux
2. windows Server

### 嵌入式操作系统
1. Linux

### 移动设备操作系统
1. iOS
2. Android

# Linux
---
### 内核版本
运行程序和管理硬件设备的核心程序. 提供在裸设备和应用程序间的抽象层. 内核包括系统调用和终端命令. 终端命令调用系统调用, 系统调用对硬件进行操作, 从而实现简介操作硬件.
### 发行版本
在内核的基础上, 开发的一套应用系统. 包括桌面环境, 办公套件等软件. 包括Ubuntu, Redhat, CentOS等. 
### Linux 文件系统
#### 根目录: /
根目录下分为/bin, /etc, /home, /lib, /usr等目录.
#### 主目录: /home
**多用户操作系统**, 每一个用户在/home下有一个/username目录, 用户只能在自己的/username下操作. 没有盘符的概念.
#### 系统配置文件存放的目录: /etc
#### 保存可执行的二进制文件的目录: /bin
如常用的ls, cat, rm等命令.

# Ubuntu
---
### 图形界面基本操作
这个有啥好写的呢???

### 基本Linux命令
命令格式: command [-options] [parameter]  
用Ctrl+C结束执行命令  

* command: 命令名
* [-options]: 选项, 对命令进行控制, 可以省略
* [parameter]: 传参, 可以是多个, 也可以没有

| Commands | Decription |
| -------- | ---------- |
| ls       | 查看当前文件夹下的内容 |
| pwd      | 查看当前所在文件夹 |
| cd[dir_name] | 切换文件夹 |
| touch[file_name] | 若文件不存在,则新建文件 |
| mkdir[dir_name] | 创建目录 |
| rm[file_name] | 删除文件 |
| clear | 清屏 |
| command --help | 查看帮助 |
| man command | 打开帮助手册 |
| tree [目录名] | 以树状图的形式列出文件目录结构 |
| cp 源文件 目标文件 | 将源文件复制到目标文件 |
| mv 源文件 目标文件 | 移动文件或目录/文件或目录重命名 |
| cat 文件名 | 查看文件内容, 创建文件, 文件合并, 追加文件内容等 |
| more 文件名 | 分屏显示文件内容 |
| grep | 搜索文本文件内容 |
| gedit 文件名 | 打开文件并编辑 |
| echo | 将输入的文字再次显示在终端上, 常和重定向联合使用 |
| > | 重定向, 表示输出, 会覆盖原文件内容 |
| >> | 重定向, 表示追加, 将内容追加到文件末尾 |
| \| | 管道, 一个命令的输出, 通过管道, 可以作为另一个命令的输入 |


#### ls
**选项:**  
-a : 查看隐藏文件  
-l : 列表方式显示文件详细信息  
-h : 配合-l以人性化的方式显示文件大小  
**通配符的使用:**  
\* : 表示任意多的任意字符  
? : 任意一个字符, 至少1个  
[] : 可以匹配字符组中的任意一个
[abc] : 匹配abc中的任意一个字母
[a-f] : 匹配a到f中的任意一个字母

#### cd
**选项:**  
~ : 切换至主目录/home (或直接cd)  
. : 保持当前目录不变  
.. : 切换到上级目录  
\- : 最近两次的工作目录里切换  
**绝对路径:**  
从主目录或根目录的准确的目录.  
**相对路径:**  
相对于当前目录而言的目录.  

#### touch
若文件不存在, 则创建新文件; 若文件存在,则可以修改文件的末次修改日期.

#### mkdir
**选项:**  
-p : 递归创建目录  

#### rm
删除后不能恢复 (不能在回收站中找到)  
**选项:**  
-r : 递归删除目录中的所有内容, 用于删除文件夹  
-f : 强制删除, 忽略不存在的文件, 没有提示信息  

#### tree
**选项:**  
-d : 只显示目录

#### cp
**选项:**  
-f : 已存在的目录直接覆盖, 不会提示  
-i : 覆盖文件前提示  
-r : 若给出的源文件是目录文件, 则cp  

#### mv
相当于剪切, 可以移动整个目录也可以移动单个文件, 可以用于改名.  
**选项:**  
-i : 覆盖前提示. 若直接mv且有同名文件时, 则会发生无提示覆盖, 无法找回被覆盖的文件

#### cat
一次性查看所有文件.  
**选项:**  
-b : 对非空输出行编号 (等价于nl命令)  
-n : 对输出的所有行编号  

#### more
**操作:**  
空格 : 下一页  
回车 : 显示下一行  
b : 上一页  
f : 下一页  
q : 退出  
/word : 搜索word字符串

#### grep
支持正则表达式查找.  
**选项:**  
-n : 显示匹配行和行号  
-v : 求反, 显示不包括匹配文本的所有行  
-i : 忽略大小写  
**正则表达式模式匹配:**  
\^a : 行首, 以a开头的行  
ke\$ : 行尾, 以ke结束的行  

#### 重定向 > 和 >>
允许命令执行结果重定向到一个文件; 将本应显示在终端上的内容输出或追加到指定文件中. 

#### 管道 |
允许将一个命令的输出, 通过管道, 作为另一个命令的输入, 左端写入, 右端读出.  
**常用的管道命令:**  
more : 分屏显示内容  
grep : 在命令执行结果的基础上查询指定文本

### 远程管理常用命令
| Command | Description |
| ------- | ----------- |
| shutdown [-options] [time] | 关机 (默认1分钟后关机, -c 表示取消) / 重启 (加-r) ; time可以写 : now表示立即执行, 具体时间, +num表示在num后执行 |
| ifconfig | 配置/查看计算机当前的网卡配置信息 |
| ping ip地址 (或域名) | 检测到目标地址的连接是否正常 |

* 注:
* 利用ifconfig | grep inet可以迅速查看IP地址  
* 查看网卡地址时, 物理网卡的命名通常以ensXX表示
* 127.0.0.1称为本地回环地址, 一般用于测试本机网卡是否正常, 即使用ping 127.0.0.1查看反馈时间

### 远程登陆和复制文件
#### SSH基础
通过SSH客户端可以连接到运行了SSH服务器的远程机器上, 其中数据传输是加密且压缩的. 
* SSH客户端是一种使用Secure Shell (SSH) 协议连接到远程计算机的**软件**程序, SSH是专为远程登陆会话和其他网络服务提供安全性的协议. 
* macOS和Linux操作系统的计算机预装了SSH客户端, 而Windows需要安装PuTTY或者XShell客户端软件. 

#### 域名和端口号
**域名 :**
* 用点分隔的字符串, 如www.baidu.com.
* 是IP地址的别名, 方便记忆
**端口号 :**
* 通过端口号可以找到计算机上运行的应用程序
  * SSH服务器的端口号默认是22, 如果是默认端口号, 在连接时可以省略
* 常见的端口号:

| 服务 | 端口号 |
| ---- | ------ |
| SSH服务器 | 22 |
| Web服务器 | 80 |
| HTTPS | 443 |
| FTP服务器 | 21 |

#### ssh
ssh [-p port] user@remote
* user: 远程机器的用户名, 不指定默认为当前用户
* remote: 远程机器的地址, 可以是IP/域名, 或者是别名
* port: SSH Server监听的端口, 如果不指定, 默认为22, 若SSH服务器端口号不是22, 则需要用-p选项选择正确的端口号.
* windows系统一般不会默认开启ssh服务器端, 因此要使用管理员身份来开启windows的服务端.如下图:  
![](ubuntu\prtsc1.png)
* 在ubuntu用ssh连接完服务器后, /目录中出现.ssh目录, 内部的known_hosts文件存储的内容为服务器的IP, 方便下次登陆不用确认 (但依然要输入密码). 同时在windows系统下.ssh文件夹下也会生成相应的known_hosts文件夹.
* **设置ssh公钥:**
  * ```ssh-keygen``` (一直回车即可)
  * ```ssh-copy-id username@IP``` (输入win用户密码确认, 注意不是pin)
* 公钥设置完成后在win用户目录下的.ssh文件夹中生成authorized_keys文件. **$\color{red}{[出现乱码, 未解决]}$**
* **配置远程别名:**
  * 用于替换username@remote
  * 在~/.ssh/config下追加:
```
Host win
  Hostname IP attrass
  User username
  Port 22
```

#### scp
Secure copy, 在Linux下用来远程拷贝文件的命令.  
* 把本地当前目录的原文件复制到远程的/home目录:  
```scp -P port 原文件 username@remote:目标文件(相对于/home的相对路径或绝对路径)```
* 把远程的/home目录的原文件复制到本地当前目录:
```scp -P port username@remote:原文件 (相对于/home的相对路径或绝对路径) 目标文件```
* -r 表示可以传送文件夹
* **注:**
* windows系统要下载putty软件, 将pscp.exe放入cmd文件目录下, 才能实现与linux系统间的文件传输
* scp适用于linux和linux间或者linux和macOS间文件传输, 而pscp适用于win与linux文件传输.

### 用户权限相关命令
**用户 :** Linux中可以指定每一个用户针对不同的文件或者目录有不同的权限.

| Authority | Abbreviation | Num |
| --------- | ------------ | --- |
| read | r | 4 |
| write | w | 2 |
| excute | x | 1 |

**组 :** 方便用户管理, 将不同的用户添加到对应的组中, 从而不用依次为每一个用户设置权限, 只需给组设置权限即可.  

如下图:
![](ubuntu\prtsc2.png)  
一共4行10列, 第一列单成为第0分区, 后面9列每3列进行划分.  
第零分区表示该文件为目录还是文件;  
第一分区表示文件拥有者权限 (此处为第一列的rey);  
第二分区表示组的权限 (此处为第二列的rey);  
第三分区表示其它用户的权限.  
中间的一串数字代表硬链接数.  

**硬链接数 :** 可以访问到当前文件/目录的方式数. (*"茴"字有多少种写法?\doge*)  
* 用相对路径和绝对路径能到达的方式
* 一般而言, 文件是1, 目录硬链接数取决于有多少子目录

#### chmod
可以修改用户/组对文件/目录的权限. 修改的是文件的读写性, 并不能精确到拥有者/组/其他用户的具体权限. 

```chmod +/-rwx file_name/dir_name```

* 例如对于```demo.py```文件, 在文件头添加```#!/usr/bin/python3.8```并且在终端执行```chmod +x demo.py```后, 执行```./demo.py```, 可以发现```demo.py```被执行. 
* 对于文件夹的可执行权限, 表示在终端对文件夹进行的如```cd, ls```等命令权限. 

#### 超级用户
Linux中的```root```账户, 用于系统的维护和管理, 对操作系统的所有资源具有访问权限. **标准账户**是指linux在安装时自动为用户创建的账户, 如我的```rey```. 

若标准用户想执行系统维护级的权限时, 添加```sudo``` (substitute user), 表示用另一个用户的身份. 为经授权的用户使用sudo时, 系统会发出警告邮件给管理员. 

#### 组管理
| Command | Description |
| ------- | ----------- |
| groupadd group_name | add new group |
| groupdel group_name | delete group |
| cat /etc/group | comfirm group info |
| chgrp -R grp_name file/dir_name | modify file/dir_name's group |

* 注: 创建/删除组时需要sudo
* /etc/group目录保存的是组的信息
* -R 表示是递归方式

#### 用户管理
| Command | Description |
| ------- | ----------- |
| useradd -m -g grp_name new_username | add new user; -m: generate /home; -g: mark grp |
| passwd username | set password |
| userdel -r username | delete user, -r: delete /home |
| cat /etc/passwd | grep username | comfirm user info |
| id | 查看用户的UID和GID |
| who | 查看当前所有登陆的用户列表 |
| whoami | 查看当前登录的用户名 |
| usermod | 设置用户的主组和附加组 |
| which | 查看命令所在位置, 除了Linux内核的cd命令不能查到 |
| su -username | 切换用户和工作目录 (若添加-) |
| exit | 退出当前账户 (并且回到上次的登陆账户) |

* 注: 设置密码时, 普通用户设置自己的密码不用加sudo, 直接passwd修改密码.
* 添加用户时, 若不指定组名, 则会生成一个与用户名同名的组名.
* **/etc/passwd文本文件 :** 6个冒号组成的7段字符串.  
  * 用户名 : 密码 (x表示加密) : UID用户标识 : GID组标识 : 用户全名或本地账号, 若为空表示与用户名相同 : 主目录 : 登陆使用的shell, ubuntu默认为dash.
* **主组 :** 新建用户时指定, GID对应的组, 修改主组:
  * ```usermod -g group_name username```
* **附加组 :** /etc/group最后一列表示用户名, 指定用户的附加权限, 修改附加组: 
  * ```usermod -G grp_name username```
  * 注意, 默认以```useradd```添加的用户没有权限使用```sudo```以root身份执行命令.
* **Shell :** 输入终端命令的窗口.修改shell:
  * ```usermod -s /bin/bash username```

#### 文件管理
| Command | Description |
| ------- | ----------- |
| chown | change owner |
| chmod | change mode |
| chgrp | change group |

* chown:
  * ```chown username file_name/dir_name```
* chgrp:
  * ```chgrp -R grp_name file/dir_name```
* chmod:
  * ```chmod -R 755 file/dir_name```
  * chmod中用三个数字分别表示拥有者/组/其他用户的权限. (常用)
  * 由前面可知: 权限的二进制代号: r(100), w(010), r(001), 由此组合分别得到三个用户的的权限.

### 系统操作命令
#### 时间
| date | 查看系统时间 |
|------|-------------|
| cal | 查看日历, -y查看一年的日历 |

#### 磁盘信息
| df -h | disk free显示磁盘剩余空间 |
|-------|--------------------------|
| du -h [dir_name] | disk usage显示目录下的文件大小 |

* -h表示人性化显示

#### 进程
指当前正在执行的一个程序.
| ps aux | process status, 选项前没有 - |
|--------|-----------------------------|
| top | 动态显示运行中的进程并排序 |
| kill [-9] 进程代号PID | 终止指定进程, -9表示强行终止 |

* ps默认只显示当前用户通过终端启动的应用程序
* ps选项:
  * a: 显示终端上的所有进程, 包括其他用户
  * u: 显示进程的详细状态
  * x: 显示不是通过终端启动的其他进程

### 其他命令
| Command | Description |
|---------|-------------|
| find [path] -name "*.py" | 在指定路径下查找.py文件, 包括子目录 |
| ln -s 被链接的原文件 链接文件 | 建立软链接 |
| tar | 打包解包 |
| gzip | 压缩, 解压缩 |
| bzip2 | 压缩, 解压缩 |
| apt-get | 软件安装 |

#### find
省略路径时, 默认查找当前目录. 可以使用正则表达式查找, 注意用双引号.

#### 软链接
相当于windows中的快捷方式.
* 若无-s, 建立的是硬链接文件 (链接名).
  * 两个文件占用相同大小的硬盘空间, 工作中几乎不会建立文件的硬链接.
* 原文件要使用**绝对路径**, 方便移动链接文件后, 仍能正常使用.

#### 硬链接
相当于文件名的别名, 浅拷贝.
* Linux中, 文件名和文件数据是分开存储的.
* 当且仅当硬链接数 == 0 时, 文件才会被删除
* ls -l查看硬链接数

#### 打包压缩
winodws: rar  
mac: zip  
Linux: tar.gz  

* ```tar```只负责打包解包, 不负责压缩解压.

* 打包:
  * ```tar -cvf 打包文件名.tar 被打包的文件/路径```
* 解包:
  * ```tar -xvf 打包文件.tar```
* 多个文件用空格分开
* 选项说明:
  * c : 生成档案文件, 创建打包文件
  * x : 解开档案文件
  * v : 列出归档解档的详细过程, 显示进度
  * f : 指定档案文件名称, f后面一定是档案名称, 因此必须在最后

* ```gzip```压缩和解压缩文件命令, 先用```tar```进行打包, 然后再用```gzip```压缩; 或者在```tar```增加 -z 选项, 可以自动调用 gzip 命令.
* 打包且压缩文件的扩展名为: .tar.gz
* 压缩:
  * ```tar -zcvf 打包文件名.tar.gz 被打包的文件/路径```
* 解压 [到指定路径]:
  * ```tar -zxvf 打包文件.tar.gz [-C] [目标路径]```

* ```bzip2```的用法与```gzip```相同, 但扩展名为.tar.bz2, 在```tar```增加选项 -j .

#### 软件安装
* ```apt```: Advanced Packaging Tool, 是Linux下一款安装包管理工具, 可以在终端下安装, 卸载, 更新软件包.

```editor
  安装:
  sudo apt install 软件包

  卸载:
  sudo apt remove 软件名

  更新:
  sudo apt upgrade 软件名
```

**配置软件源 :**  
去百度. 推荐清华镜像源和阿里镜像源 (当然如果ubuntu主服务器比较快就没必要)